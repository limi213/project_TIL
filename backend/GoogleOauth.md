# :globe_with_meridians: Google Login

프로젝트에서 소셜로그인 1순위로 구글로그인을 택했다.

프로젝트가 웹이라는 점과 많이 사용하는 소셜로그인이라는 점에서 1순위가 되었다.

그 다음은 네이버, 카카오가 있는데 아직까지는 추가기능이라서 구현이 가능할지는 모르겠다.

일단 구현이 완성은 되었지만 테스트가 남아있어 구글 로그인을 구현하면서 겪었던 시행착오에 대해서 기록하겠다.

## :see_no_evil: 구조

처음에 구글로그인을 구현하면서 생각한 구조는

1. 프론트가 인증서버와 통신하여 인가코드를 받는다.

2. 프론트에서 인가코드를 포함하여 백으로 로그인 요청을 보낸다.

3. 백에서 받은 인가코드를 이용해서 사용자의 정보를 받아서 로그인을 진행한다.

이것이다.

<br>
결국은 이렇게 진행했는데 많은 자료들을 참고하면서 구현하다보니

1. 프론트가 백으로 소셜로그인 요청을 보낸다.

2. 백에서 인증 서버를 redirect한다.

3. 로그인이 성공하면 주는 인가코드를 callback 주소인 백으로 넘긴다.

4. 백에서 받은 인가코드를 이용해서 사용자의 정보를 받아서 로그인을 진행한다.

이런식으로 구현하게 되었다.

프론트에서 구글 로그인과 관련하여 많은 것을 받는 것보다 실제 서비스 로직을 처리하는 백에서 하는 것이 맞다고 판단하여 대부분의 일을 백에서 하게 된 것이다.

그래서 구현을 모두 마치고 백에서 테스트까지도 성공을 했다.!

하지만 문제는 프론트와 연결하면서 발생했다.

바로 CORS ERROR이다......

다른 API 모두 문제 없는데 구글 로그인만 문제가 되는 것이었다..ㅠㅠ

알아본 결과, 백에서 redirect 처리를 하면서 승인된 URI가 아니게 되어 버리는 문제가 발생하게 되었다.

따라서 다시 처음에 생각했던 구조로 구현을 하게 되었다!

일단 구현은 마친 상태이나 아직 프론트와 연결이 원만하지 않아서 추가적인 정보를 다시 적어보겠다,.
