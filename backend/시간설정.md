# :monocle_face: 시간 설정

백엔드에서 어떤 값들의 목록을 반환해야 했다. 이때 내용, 값, 등록시간을 반환해주었다.

분명 swagger 테스트에서도 잘 되었었는데 갑자기 프론트에서 화면에 띄우는데 시간이 왜 새벽 4시로 찍히는거야?! 라고 물어왔다.

처음엔 진짜 4시에 접속해서 뭐 했던거 아냐? 라고 했지만 실제로 DB에 있는 데이터와 비교해보니 시간이 아예 다르게 나온다는 것을 확인했다.

구현의 문제인줄 알고 식겁해서 테스트를 다시 해봤는데 알고보니 로컬에 있는 swagger에서는 값이 잘 나오는데 서버에 올려놓은 swagger에서는 값이 다르게 나오는 것이었다..

아니 DB도 서버에 있는 건데 왜 값이 다르게 나온 것일까?


## :thread: 첫 번째 설정

일단 처음에 jenkins를 사용해서 배포를 하고 있는데 jenkins 설정 시간이 현재 시간과 다르다는 것을 알고 있어서, 

jenkins를 통해 자동배포가 되고 빌드될 때 알아서 현재 jenkins가 인식하고 있는 시간으로 컨버팅해서 보여주나보다라고 생각했다.

그래서 jenkins의 timezone을 확인 후 바꾸는 작업을 진행했다.

[젠킨스 시간설정](https://timevoyage.tistory.com/147)

위 링크를 참고하여 시간을 바꿔주었다.

실제로 jenkins에서는 UTC를 사용중이었기 때문에 Asia/Korea 로 변경해주었다.

하지만 바로 적용이 안되었기 때문에 두 번째 시도를 하게 되었다.

<br>

## :wrench: 두 번째 설정

그 다음은 데이터와 관련된 것이니까 DB의 timezone이 문제일 것이라고 생각했다.

실제로 server에 배포된 mysql의 timezone을 확인한 결과 UTC로 설정되어 있었다.

[mysql 시간 설정](https://velog.io/@dkatlf900/MysqlTimezone)

따라서 실제로 위 링크는 아니었지만 비슷한 내용을 통해서 Asia/Korea 로 변경했다.

하지만 이때도 바로 적용이 안되었기 때문에 일단은 나중에 다른 방법을 찾아야겠다고 생각하고 멈췄다.

<br>

## :bulb: 결과

설정을 9일 밤에 했는데 10일 아침에 확인해보니 데이터가 원래 시간으로 잘 나온다는 사실을 확인했다.

두 설정 중 하나가 영향을 주고 있던게 확실해졌다.

아마 서버 설정을 바꾸는게 바로 적용이 안되는 문제가 있었던 것 같다.

